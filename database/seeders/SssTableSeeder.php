<?php
namespace Database\Seeders;

use Illuminate\Database\Seeder;
use App\Models\SssVersionsTable;
use App\Models\SssBrackets;

class SssTableSeeder extends Seeder
{
    public function run(): void
    {
        // 1. Create the Latest Version (15% Total Rate)
        $version = SssVersionsTable::create([
            'version_name'   => 'SSS Contribution Table 2025-2026',
            'effective_date' => '2025-01-01', // Standardized for current law
            'ee_rate'        => 0.0500, // 5%
            'er_rate'        => 0.1000, // 10%
            'status'         => 'active',
        ]);

        // 2. Full Bracket List up to 35,000 ceiling
        // Format: [Min, Max, MSC, EC_ER_Share]
        $brackets = [
            // Lower brackets (Minimum MSC starts at 5,000)
            [0, 5249.99, 5000, 10], // Minimum MSC is now PHP 5,000
            [5250, 5749.99, 5500, 10],
            [5750, 6249.99, 6000, 10],
            [6250, 6749.99, 6500, 10],
            [6750, 7249.99, 7000, 10],
            [7250, 7749.99, 7500, 10],
            [7750, 8249.99, 8000, 10],
            [8250, 8749.99, 8500, 10],
            [8750, 9249.99, 9000, 10],
            [9250, 9749.99, 9500, 10],
            [9750, 10249.99, 10000, 10],
            [10250, 10749.99, 10500, 10],
            [10750, 11249.99, 11000, 10],
            [11250, 11749.99, 11500, 10],
            [11750, 12249.99, 12000, 10],
            [12250, 12749.99, 12500, 10],
            [12750, 13249.99, 13000, 10],
            [13250, 13749.99, 13500, 10],
            [13750, 14249.99, 14000, 10],
            [14250, 14749.99, 14500, 10],

            // EC Jump to PHP 30 at 15k MSC
            [14750, 15249.99, 15000, 30],
            [15250, 15749.99, 15500, 30],
            [15750, 16249.99, 16000, 30],
            [16250, 16749.99, 16500, 30],
            [16750, 17249.99, 17000, 30],
            [17250, 17749.99, 17500, 30],
            [17750, 18249.99, 18000, 30],
            [18250, 18749.99, 18500, 30],
            [18750, 19249.99, 19000, 30],
            [19250, 19749.99, 19500, 30],
            [19750, 20249.99, 20000, 30],
            [20250, 20749.99, 20500, 30],
            [20750, 21249.99, 21000, 30],
            [21250, 21749.99, 21500, 30],
            [21750, 22249.99, 22000, 30],
            [22250, 22749.99, 22500, 30],
            [22750, 23249.99, 23000, 30],
            [23250, 23749.99, 23500, 30],
            [23750, 24249.99, 24000, 30],
            [24250, 24749.99, 24500, 30],
            [24750, 25249.99, 25000, 30],
            [25250, 25749.99, 25500, 30],
            [25750, 26249.99, 26000, 30],
            [26250, 26749.99, 26500, 30],
            [26750, 27249.99, 27000, 30],
            [27250, 27749.99, 27500, 30],
            [27750, 28249.99, 28000, 30],
            [28250, 28749.99, 28500, 30],
            [28750, 29249.99, 29000, 30],
            [29250, 29749.99, 29500, 30],
            [29750, 30249.99, 30000, 30],
            [30250, 30749.99, 30500, 30],
            [30750, 31249.99, 31000, 30],
            [31250, 31749.99, 31500, 30],
            [31750, 32249.99, 32000, 30],
            [32250, 32749.99, 32500, 30],
            [32750, 33249.99, 33000, 30],
            [33250, 33749.99, 33500, 30],
            [33750, 34249.99, 34000, 30],
            [34250, 34749.99, 34500, 30],

            // Final Row: 34,750 and Over
            [34750, null, 35000, 30], // Maximum MSC is now PHP 35,000
        ];

        foreach ($brackets as $data) {
            SssBrackets::create([
                'version_id'  => $version->id,
                'min_salary'  => $data[0],
                'max_salary'  => $data[1],
                'msc_amount'  => $data[2],
                'ec_er_share' => $data[3],
            ]);
        }
    }
}
